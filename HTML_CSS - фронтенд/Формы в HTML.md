
[[Питон Практикум]]
[[HTML_CSS - фронтенд]]
[[Фреймворк Django. Работа с проектами]]

## HTML-формы

**Форма** (иногда говорят «веб-форма» или «HTML-форма») — это набор HTML-элементов, которые отрисовывают в браузере интерфейс для ввода информации. Данные, введённые в форму, браузер отправляет на сервер.


После того как пользователь заполнил форму и нажал кнопку «Отправить», браузер отправляет на сервер GET- или POST-запрос (метод запроса указывается в коде формы). В запросе браузер отправляет данные, введённые в форму. Возможна и передача скрытых данных — в форме могут быть поля с атрибутом `type="hidden"`, они не видны пользователю и могут быть заполнены программно — например, при создании формы.

## Препарируем форму

Вот пример простейшей формы: поле для ввода и кнопка. Через такую форму можно, например, отправить имя пользователя

![[Pasted image 20250511150252.png]]


В самом простом варианте вёрстки HTML-код этой формы может выглядеть так:

```html
...
<form>  
  <input type="text" name="user_name" required>
  <input type="submit" value="Отправить">
</form>
...
```


`<form>` — парный тег, который определяет начало и конец формы в коде.

`<input>` — многофункциональный одиночный тег, который в зависимости от указанных атрибутов может быть полем для ввода, кнопкой, переключателем, флажком и т. д.


## Атрибуты тега 
```
/           <input>              \
```

Атрибут `type` тега `<input>` сообщает браузеру, в каком виде отображать этот элемент.

`type` заставляет тег `<input>` принимать очень разные обличья.

Вот лишь некоторые значения, которые может принимать атрибут `type`:


![[Pasted image 20250511150459.png]]


Если в `type` указано, что поле должно принимать только специфическое содержимое (например `number` или `email`), то перед отправкой данных браузер проверит, соответствует ли введённая информация требованиям.


![[Pasted image 20250511150555.png]]


Остальные атрибуты тега `<input>`:

- Атрибут `name` — имя элемента, которое используется для отправки данных на сервер.
- Атрибут `required` делает поле обязательным для заполнения.
- Атрибут `value`: на кнопках `<input type="submit">` или `<input type="reset">` — определяет надпись на кнопке; для полей ввода — позволяет заранее заполнить их содержимым по умолчанию.

Полный список атрибутов и возможных значений тега `<input>` можно посмотреть [в документации](https://developer.mozilla.org/ru/docs/Web/HTML/Element/Input).


После того как пользователь нажмёт на кнопку отправки формы (как правило, кнопка отрисовывается с помощью тега `<input type="submit">`) — браузер отправляет запрос к серверу.

При отправке формы браузер для каждого поля создаёт пары «имя=значение», где имя поля — значение атрибута `name`, а значение — информация, введённая пользователем или установленная в форме по умолчанию.


Если отправить эту форму — на сервер будет передана информация в таком виде: `user_name=Клинт`.


### Заголовки полей, тег <label>

Для удобства пользователей к полям формы можно добавить название; это делается с помощью тега `<label>` (англ. «метка, ярлык»).

В HTML-коде это выглядит так:

```html
<form>
  <label>Введите имя: </label>
  <input type="text" name="user_name" required>  
  <input type="submit" value="Отправить">
</form>
```

![[Pasted image 20250511161850.png]]


Вместо тега `<label>` можно использовать любой другой (например `<span>`), но у `<label>` есть одна приятная особенность. Чтобы не заставлять пользователя целиться мышкой в маленькие элементы (например в чекбоксы), можно дать ему возможность кликать по заголовку — такой клик будет устанавливать и снимать галочку.


Для этого нужно указать, какое поле с каким заголовком связано:

- в `<input>`, к которому относится `<label>`, нужно установить атрибут `id` (это идентификатор тега; значение этого атрибута должно быть уникально в пределах всего HTML-документа);
- в `<label>` нужно добавить атрибут `for` с тем же значением, что и в атрибуте `id` поля `<input>`.

Теперь галочка в чекбоксе будет устанавливаться при клике по лейблу; если же такой фокус провернуть с полем ввода, то при клике по лейблу в поле будет установлен курсор и можно начинать вводить текст.

Вот так это будет выглядеть в HTML:


```html
<form>  
  <label>Введите имя: </label>  
  <input type="text" name="user_name" required>
  <!-- В атрибуте for указываем id того поля, к которому относится label. -->
  <label for="is_human">Я человек</label>  
  <!-- В input указываем id, совпадающий со значением for в label. -->
  <input id="is_human" type="checkbox" name="human">
  <input type="submit" value="Отправить">
</form>
```


## Внешний вид форм

Приведённый код будет отлично работать, но выглядит форма не очень:


![[Pasted image 20250511162128.png]]


Дело в том, что по умолчанию все элементы формы выстраиваются в строку. Разместим элементы на отдельных строках: это сделает форму понятнее.

Содержимое тега `<form>` можно форматировать с помощью любых HTML-тегов. Разобьём форму на строки с помощью тегов `<p></p>`; немного улучшим интерфейс: добавим подсказку для пользователя.


```html
<form>
  <p>
    <label>Введите имя: </label>
    <input type="text" name="user_name" required>
  </p>
  <p>
    <label for="is_human">Я человек</label>
    <input id="is_human" type="checkbox" name="human"><br>
    <small>Не ставьте галочку, если вы не человек</small>
  </p>
  <p><input type="submit" value="Отправить"></p>
</form>
```


![[Pasted image 20250511162224.png]]


### Атрибуты тега <form>

У тега формы есть несколько атрибутов, но пока что рассмотрим только два из них: `method` и `action`; эти атрибуты отвечают за то, запрос какого типа будет отправлен и на какой адрес.

Если эти атрибуты не указаны, то применяются настройки по умолчанию:

- отправляется GET-запрос;
- запрос отправляется на тот же адрес, где расположена страница с формой.

Например, если веб-форма размещена на странице по адресу `https://acme.not/form/` и в ней не указаны атрибуты `method` и `action` — после нажатия на кнопку «Отправить» браузер отправит GET-запрос с данными из формы на адрес `https://acme.not/form/`.

- В атрибуте `action="<адрес обработки>"` указывают, на какой именно адрес нужно отправить запрос.
- В атрибуте `method="<название метода>"` указывают метод отправки запроса.  
    Есть два варианта: `method="get"` и `method="post"`. GET, как правило, применяют для получения информации (например в формах поисковых запросов), а POST — для добавления/изменения данных на сервере: например для регистрации пользователя или публикации сообщения.

Полный список атрибутов тега `<form>` и их значений можно посмотреть [в документации](https://developer.mozilla.org/ru/docs/Web/HTML/Element/form).


### Что содержат GET-запросы?

Если в форме используется метод **GET**, то информация передаётся через адресную строку браузера. Посмотрим на практике.

В рабочей директории компьютера создайте файл _example.html_ и вставьте в него HTML-код с формой:


```html
<!-- example.html -->
<html>
  <head>
    <title>Представьтесь, пожалуйста</title>
  </head>
  <body>
    <form>
      <p>
        <label>Введите имя: </label>
        <input type="text" name="user_name" required>
      </p>
      <p>
        <label for="is_human">Я человек</label>
        <input id="is_human" type="checkbox" name="human"><br>
        <small>Не ставьте галочку, если вы не человек</small>
      </p>
      <p><input type="submit" value="Отправить"></p>
    </form>
  </body>
</html>
```


Откройте файл в браузере; в адресной строке будет указан путь к файлу на жёстком диске. Заполните форму и нажмите «Отправить».

Браузер послушно отправит запрос, хотя никакого сервера у нас нет.

Атрибут `action` в теге формы не указан, так что запрос будет отправлен к адресу этой же страницы; страница просто перезагрузится, откроется заново.

Однако в адресной строке браузера появятся параметры, в которых будет содержаться информация из отправленной формы:

_…/example.html?user_name=Дэвид&human=on_


Параметры в GET-запросе отделены от названия файла знаком вопроса `?`; данные перечислены в виде пар `имя=значение`, эти пары отделены друг от друга символом амперсанда `&`.

Чекбокс с установленной галочкой создаёт значение `on`; в результате в запросе отправлен параметр `human=on`. Если же галочка в чекбоксе не установлена — этот параметр просто не передаётся в запросе. Вместо `on` можно установить любое другое значение: для этого в тег `<input type="checkbox">` добавляют атрибут `value` с нужным значением.

Например, такой чекбокс будет отправлять параметр `human=yesss`:


```html
<input id="is_human" type="checkbox" name="human" value="yesss">
```




Проведём ещё один несложный эксперимент. В той же директории, где сохранён файл _example.html_, создайте ещё один html-файл, назовите его _thanks.html_; разместите в нём какой-нибудь текст:

```html
<!-- thanks.html -->
<html>
  <head>
    <title>Спасибо за сообщение</title>
  </head>
  <body>
    <h1>Спасибо!</h1>
    <p>Ваше сообщение отправлено,<br>
    но обработать его без сервера мы не можем :(</p>
  </body>
</html>
```

В файле _example.html_ в форму добавьте атрибут `action="thanks.html"` — «запрос из формы должен быть отправлен к странице _thanks.html_»:

```html
<!-- example.html -->
...
  <form action="thanks.html">
...
```


После отправки формы загрузится страница, указанная в атрибуте `action`: запрос из формы ушёл именно к этому адресу. В адресной строке отобразятся данные, отправленные из формы.

![[Pasted image 20250511162907.png]]




### Передача данных методом POST

Добавьте в форму на странице _example.html_ атрибут `method="post"`.


заполните форму и отправьте её.

Вновь откроется страница _thanks.html_, но параметров в адресной строке уже не будет: в POST-запросах данные отправляются в **теле запроса**, а не параметрами в адресе.

Увидеть отправленные данные можно в панели «Инструменты разработчика» (Windows: F12; Linux: Ctrl+Shift+i; macOS: Command+Option+i). В зависимости от того, в каком браузере вы работаете, интерфейс может немного отличаться. Скриншоты сделаны на примере браузера Chrome.

Откройте вкладку **Network** (Сеть), убедитесь, что выставлен фильтр **All**, и кликните по названию страницы в левой колонке. Если названия страницы не видно — обновите страницу.

На вкладке **Payload** будет отображено содержимое тела POST-запроса:


![[Pasted image 20250511163016.png]]


В теле POST-запроса видны те же параметры, что были при отправке формы методом GET, но они представлены в виде `имя: значение`. Если нажать на кнопку **view source** (посмотреть источник), то будет видно, что данные переданы в том же формате, что и при GET-запросе.

## И что толку с формы в файле?

Форма, отображаемая в браузере, — готовый интерфейс для отправки запросов на сервер (если, конечно, сервер готов принять и обработать ваш запрос).

Стоит чуть исправить аргумент `action` в форме и `name` поля для ввода — и у вас на столе окажется форма для отправки запросов в Яндекс:


```html
<html>
  <head>
    <title>А не поискать ли в Яндексе?</title>
  </head>
  <body>
    <!-- Ставим адрес, куда должен уйти запрос -->
    <form action="https://yandex.ru/search/"> 
      <p>
        <label>Введите запрос: </label>
        <!-- Ставим то name поля, которое ожидает сервер: text -->
        <input type="text" name="text" required>
      </p>
      <!-- Для красоты меняем название на кнопке -->
      <input type="submit" value="Спросить у Яндекса">
    </form>
  </body>
</html>
```


Форму можно вставить в шаблон Django — она тоже будет прекрасно работать.

Можно создать страницу _form/_ с формой и страницу _thanks/_, к которой будет отправлен запрос из формы.

Чтобы такая форма в Django заработала, требуется выполнить несколько знакомых действий:

- разместить HTML-код формы в шаблоне страницы _form/_;
- описать маршрут в _urls.py_;
- подготовить view-функцию, которая обработает запрос к странице _thanks/_: передаст полученные из формы данные в шаблон;
- подготовить шаблон страницы, которую вернёт эта view-функция; в шаблоне можно предусмотреть вывод информации, полученной из формы.


