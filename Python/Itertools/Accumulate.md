–§—É–Ω–∫—Ü–∏—è¬†`accumulate()`¬†‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏–∑ –º–æ–¥—É–ª—è¬†`itertools`¬†–≤ Python, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—á–∏—Å–ª—è—Ç—å¬†**–∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–µ (–Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º—ã–µ) –∑–Ω–∞—á–µ–Ω–∏—è**¬†–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –û–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –∑–∞–¥–∞—á, –≥–¥–µ –Ω—É–∂–Ω–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

---

## üîπ¬†**–û—Å–Ω–æ–≤—ã¬†`accumulate()`**

### üìå¬†**–ò–º–ø–æ—Ä—Ç**

python

Copy

Download

from itertools import accumulate

### üìå¬†**–°–∏–Ω—Ç–∞–∫—Å–∏—Å**

python

Copy

Download

accumulate(iterable, func=None, *, initial=None)

- `iterable`¬†‚Äî –≤—Ö–æ–¥–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–ø–∏—Å–æ–∫, –∫–æ—Ä—Ç–µ–∂ –∏ —Ç. –¥.).
    
- `func`¬†‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Å–ª–æ–∂–µ–Ω–∏–µ¬†`+`).
    
- `initial`¬†‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ Python 3.8).
    

---

## üîπ¬†**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### 1Ô∏è‚É£¬†**–°—É–º–º–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**

python

Copy

Download

from itertools import accumulate

numbers = [1, 2, 3, 4]
result = list(accumulate(numbers))
print(result)  # [1, 3, 6, 10]

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
`1 ‚Üí 1+2=3 ‚Üí 3+3=6 ‚Üí 6+4=10`

---

### 2Ô∏è‚É£¬†**–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–ø–µ—Ä–µ–¥–∞—á–∞ —Å–≤–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏)**

python

Copy

Download

from itertools import accumulate
import operator

numbers = [1, 2, 3, 4]
result = list(accumulate(numbers, operator.mul))
print(result)  # [1, 2, 6, 24]

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
`1 ‚Üí 1*2=2 ‚Üí 2*3=6 ‚Üí 6*4=24`

---

### 3Ô∏è‚É£¬†**–ú–∞–∫—Å–∏–º—É–º/–º–∏–Ω–∏–º—É–º**

python

Copy

Download

from itertools import accumulate

nums = [3, 1, 4, 1, 5]
max_acc = list(accumulate(nums, max))
min_acc = list(accumulate(nums, min))

print(max_acc)  # [3, 3, 4, 4, 5]
print(min_acc)  # [3, 1, 1, 1, 1]

---

### 4Ô∏è‚É£¬†**–° –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (`initial`)**

python

Copy

Download

from itertools import accumulate

numbers = [2, 3, 4]
result = list(accumulate(numbers, initial=10))
print(result)  # [10, 12, 15, 19]

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
`10 ‚Üí 10+2=12 ‚Üí 12+3=15 ‚Üí 15+4=19`

---

## üîπ¬†**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**

1. **–§–∏–Ω–∞–Ω—Å—ã:**¬†—Ä–∞—Å—á–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞.
    
2. **–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö:**¬†—Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ, –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–µ —Å—É–º–º—ã.
    
3. **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:**¬†—Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª—ã, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
    

---

## üîπ¬†**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†`accumulate`¬†–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–∂–µ–Ω–∏–µ (`operator.add`), –Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ª—é–±—É—é –±–∏–Ω–∞—Ä–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é.
    
- –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî¬†**–∏—Ç–µ—Ä–∞—Ç–æ—Ä**, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–ø–∏—Å–∫–∞ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤¬†`list()`.
    

---

## üîπ¬†**–ê–Ω–∞–ª–æ–≥ –±–µ–∑¬†`itertools`**

–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`accumulate`, —Ç–æ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

python

Copy

Download

def manual_accumulate(lst, func=lambda x, y: x + y):
    result = []
    acc = lst[0]
    result.append(acc)
    for item in lst[1:]:
        acc = func(acc, item)
        result.append(acc)
    return result

---

### –ò—Ç–æ–≥

`accumulate()`¬†‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏–∑¬†`itertools`



–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å "—ë–ª–æ—á–∫—É" –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏¬†`accumulate()`, –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º—ã–µ —Å–ª–æ–≤–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤ —Å—Ç—Ä–æ–∫—É, –∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–±–µ–ª–æ–≤. –í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:

python

Copy

Download

from itertools import accumulate

text = input().split()
for item in accumulate(text, lambda x, y: f"{x} {y}"):
    print(item)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. `input().split()`¬†- —Ä–∞–∑–±–∏–≤–∞–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ —Å–ª–æ–≤–∞
    
2. `accumulate(text, lambda x, y: f"{x} {y}")`¬†- –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Å–ª–æ–≤–∞, –¥–æ–±–∞–≤–ª—è—è –∫–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª
    
3. –¶–∏–∫–ª¬†`for`¬†–≤—ã–≤–æ–¥–∏—Ç –∫–∞–∂–¥—É—é –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:

–í–≤–æ–¥:

Copy

Download

hello world this is python

–í—ã–≤–æ–¥:

Copy

Download

hello
hello world
hello world this
hello world this is
hello world this is python

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–±–µ–∑ lambda):

python

Copy

Download

from itertools import accumulate
import operator

text = input().split()
for item in accumulate(text, operator.add):
    print(' '.join(item))

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Å–ª–æ–≤–∞ –≤ –∫–æ—Ä—Ç–µ–∂–∏, –∞ –∑–∞—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª —Å –ø–æ–º–æ—â—å—é¬†`' '.join()`.

—Ç.–µ. x —ç—Ç–æ —Ç–æ —á—Ç–æ –±—ã–ª–æ, –∞ y –¥–æ–±–∞–≤–ª—è–µ–º–æ–µ —Å–ª–æ–≤–æ?

Edit

–î–∞, –∏–º–µ–Ω–Ω–æ —Ç–∞–∫! –í —Ñ—É–Ω–∫—Ü–∏–∏¬†`accumulate()`, –∫–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä¬†`func`, –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

- **`x`**¬†‚Äî —Ç–µ–∫—É—â–µ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
    
- **`y`**¬†‚Äî —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    

---

### üîπ¬†**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç¬†`accumulate()`¬†—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π?**

–ù–∞ –ø—Ä–∏–º–µ—Ä–µ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞:

python

Copy

Download

from itertools import accumulate

text = ["hello", "world", "this", "is", "python"]

for item in accumulate(text, lambda x, y: f"{x} {y}"):
    print(item)

#### –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

1. **–ü–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è**:
    
    - `x = "hello"`¬†(–ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç, –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
        
    - `y = "world"`¬†(–≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç)
        
    - –†–µ–∑—É–ª—å—Ç–∞—Ç:¬†`"hello world"`
        
2. **–í—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è**:
    
    - `x = "hello world"`¬†(–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
        
    - `y = "this"`¬†(—Ç—Ä–µ—Ç–∏–π —ç–ª–µ–º–µ–Ω—Ç)
        
    - –†–µ–∑—É–ª—å—Ç–∞—Ç:¬†`"hello world this"`
        
3. **–ò —Ç–∞–∫ –¥–∞–ª–µ–µ**...


[[Python]]
[[Itertools]]