
То есть если я использую контекстный менеджер при работе с файлами, то мне больше не нужно использовать `close()` для закрытия файла?

И это тоже. Но главное — твой код становится более элегантным, безопасным и профессиональным.


Контекстный менеджер — это конструкция, которая во время работы программы создаёт определённым образом настроенную среду («контекст»), где будет выполняться заданный код.

Контекстный менеджер полезен в тех случаях, когда перед выполнением некоторых операций нужно подготовиться, а после — «прибраться».

На практике такие конструкции могут пригодиться, например, при работе с файлами:

- открыть файл («подготовка к работе»);
- выполнить необходимые операции;
- закрыть файл («уборка после работы»).

**Чтобы выполнить код в среде контекстного менеджера, используется такой синтаксис:**


```
with ContextManager as cm:
    # Код, который будет выполнен в контексте ContextManager. 
```


**Здесь:**

- `with` и `as` — ключевые слова, которые говорят Python, что код будет выполняться в среде контекстного менеджера.
- `ContextManager` — название контекстного менеджера.
- `cm` — переменная, через которую происходит взаимодействие с ресурсом (например, с файлом), управляемым контекстным менеджером.


## Встроенные контекстные менеджеры

В Python есть «готовые к употреблению», встроенные контекстные менеджеры, и `open()` — один из них.

Когда вы используете обычную встроенную функцию `open()`, то есть без синтаксиса `with … as …`, в коде нужно явно прописывать этапы подготовки к работе и «уборки», то есть нужно явно открыть файл и обязательно закрыть его:



```
f = open('hello_bro.txt', 'w')
f.write('Здравствуй, Стас!')
f.close() 
```

С синтаксисом `with … as …` всё выглядит проще и лаконичнее…


```
with open('hello_bro.txt', 'w') as f:
    f.write('Здравствуй, Стас!') 
```

…а результат работы программы остаётся прежним.

В рамках синтаксиса `with … as …` также при необходимости можно явно указать кодировку:


```
with open('hello_bro.txt', 'w', encoding='utf-8') as f:
    f.write('Здравствуй, Стас!') 
```


