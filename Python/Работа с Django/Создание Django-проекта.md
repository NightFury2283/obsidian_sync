[[Питон Практикум]]
[[Фреймворк Django. Работа с проектами]]

Развёртывание Django-проекта выполняется в несколько простых шагов:

1. Создайте в папке _Dev_ (она уже есть на вашем компьютере) отдельную директорию _jump_into_django._ Это будет **корневая директория проекта,** в ней будет храниться всё, что касается проекта: папка с виртуальным окружением, служебные файлы и рабочая директория — папка с кодом проекта.
2. В корневой директории проекта создайте виртуальное окружение. Откройте консоль, перейдите в корневую директорию проекта _Dev/jump_into_django/_ и выполните команду
    - Linux/macOS: `python3 -m venv venv`;
    - Windows: `python -m venv venv` или `py -3 -m venv venv`.
3. Активируйте виртуальное окружение: из директории _Dev/jump_into_django_ выполните команду:
    - Linux/macOS: `source venv/bin/activate`;
    - Windows: `source venv/Scripts/activate`.
4. Обновите пакетный менеджер: при создании виртуального окружения будет использоваться та версия менеджера, которая была установлена вместе с Python. И это будет, скорее всего, не самая последняя версия, о чём вам и будет сообщаться каждый раз при обращении к нему. Обновить версию можно командой
    - Linux/macOS: `python3 -m pip install --upgrade pip`;
    - Windows: `python -m pip install --upgrade pip`.
5. В активированном виртуальном окружении разверните фреймворк Django версии 3.2.16: `pip install Django==3.2.16`.
6. Создайте Django-проект командой: `django-admin startproject acme_project` (название может быть любым, для тренировки пусть будет _acme_project_).



После выполнения этой команды в корневой папке проекта появится **рабочая папка проекта** `acme_project`:

```
jump_into_django/             <-- Корневая директория проекта
├── .vscode/                  <-- Настройки VSCode (этой папки может и не быть)
├── acme_project/             <-- Рабочая папка проекта
|   ├── acme_project/         <-- Папка с настройками проекта
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── settings.py       <-- Файл с настройками проекта
|   |   ├── urls.py
|   |   └── wsgi.py
|   └── manage.py
└── venv/ 
```




В результате в **корневой директории проекта** будет создана папка с виртуальным окружением и **рабочая папка проекта** — директория, где хранятся файлы Django-проекта.

- В директории `acme_project` лежат файлы с кодом проекта.
- `acme_project/manage.py` — файл управления Django-проектом из командной строки. Работа с базой данных, запуск встроенного сервера разработки, создание `приложений` — все эти операции будем выполнять через вызов этого файла.
- Пустой файл `acme_project/acme_project/__init__.py` объявляет эту директорию `пакетом Python`.
- В файле `acme_project/acme_project/urls.py` настраиваются `URL проекта`.
- `acme_project/acme_project/wsgi.py` и `acme_project/acme_project/asgi.py` — файлы конфигурации, они пригодятся при размещении проекта на веб-сервере.
- В файле `acme_project/acme_project/settings.py` хранятся все настройки проекта. При развёртывании проекта устанавливаются стандартные настройки; в ходе разработки их изменяют или дополняют. В быту этот файл называют «конфиг» или «сеттинг», хотя более педантичные программисты говорят «файл настроек» или «файл конфигурации проекта». Но таких программистов мало.



## Запуск Django-проекта

Django-проект создан, но пока он просто лежит мёртвым грузом. Чтобы увидеть его в работе — нужно его запустить.

Откройте терминал в VSCode, активируйте виртуальное окружение проекта.

Перейдите в рабочую папку проекта — в директорию, в которой лежит файл _manage.py_. Посредством этого файла разработчик может управлять проектом: запускать его, создавать в проекте новые приложения и выполнять множество других операций.

Из рабочей папки проекта выполните команду


```
python manage.py runserver # В Windows
# или
python3 manage.py runserver # В Linux/macOS.

# В последующих примерах команд мы будем указывать только один вариант;
# если у вас Windows - пишите python;
# если у вас Linux или macOS - пишите python3. 
```

Эта команда запустит «сервер разработки» — встроенный в Django **веб-сервер**, программу, которая может принимать http-запросы и передавать их в Django-проект. А проект будет обрабатывать запросы и возвращать ответы.

Когда понадобится остановить сервер — просто закройте окно терминала или нажмите комбинацию клавиш CTRL+C.

Если всё сделано правильно — в консоли отобразится сообщение:


```
...
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK. 
```



Помимо этого, в консоли появились строчки с сообщением, что в проекте есть 18 каких-то недоделок, _unapplied migration(s)_. Для полноценной работы Django-проект хочет обновить базу данных, добавив в неё необходимую информацию; он даже подсказывает, как это сделать:


```
Run 'python manage.py migrate' to apply them. 
```

Чтобы это сообщение не раздражало вас при каждом запуске проекта — дайте ему то, что он хочет: остановите веб-сервер разработки и в консоли выполните команду


```
python manage.py migrate 
```



Откройте браузер и перейдите по адресу _[http://127.0.0.1:8000/](http://127.0.0.1:8000/)_ — это адрес вашего компьютера; сервер разработки Django будет принимать запросы, поступившие на этот адрес, и перенаправлять их в приложение, которое запущено локально (на вашем компьютере).

Сразу после развёртывания Django умеет обрабатывать только запросы к главной странице, но и этого достаточно, чтобы убедиться, что проект работает.

В браузере должна отобразиться стандартная приветственная страница Django:



