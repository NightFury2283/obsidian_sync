
[[Python]]
[[Фреймворк Django. Работа с проектами]]
[[Питон Практикум]]

# Зачем программисту тестирование?

## Лавина изменений в коде

Как правило, решение любой задачи в проекте затрагивает код нескольких файлов. С ростом сложности проекта любое изменение может породить волны правок. Небольшое исправление может привести к тому, что часть проекта просто перестанет работать — и об этом никто не узнает до тех пор, пока не пойдут жалобы от пользователей.

Выход один: после любого обновления досконально проверять проект, каждый раз убеждаясь, что всё работает без ошибок.

Вы уже немного знакомы с тестами: перед тем, как сдать проект на ревью, вы запускаете готовые тесты, проверяющие вашу домашнюю работу.

Тесты полезны и при рефакторинге проекта: вероятность появления новых ошибок в коде, покрытом тестами, значительно снижается.

Программист пишет тесты, а тестировщик тестирует приложение в целом. Составляет план тестирования, проверяет приложение на разных устройствах и в разном разрешении экрана, пишет подробный отчёт, баг-репорт — а затем отслеживает, все ли баги исправлены.

Помимо багов, тестировщик ищет уязвимости и даже пытается сломать приложение, заваливая его тысячами запросов или вводя неправильные данные.

Во-первых, придётся нанимать гораздо больше тестировщиков, один не справится, а во-вторых, работа замедлится. Представьте: программист написал код и отдал тестировщику; тот написал тесты, нашёл баги, написал отчёт и передал программисту; программист уже занят другой задачей, баги лежат и ждут; выход новой версии продукта затягивается.

Если же тесты пишет программист — всё получается быстрее и проще. Работа над кодом и тестами идёт параллельно: написал новую функцию — напиши и тест к ней. Либо наоборот…

Сначала пишутся тесты, а потом — такой код, который пройдёт эти тесты. Для такого подхода есть отработанная концепция — **TDD**, **T**est **D**riven **D**evelopment: «Разработка через тестирование».

## Пять стадий принятия тестов

Написание тестов — это неотъемлемая часть работы современного программиста. Требования к знаниям и навыкам по тестированию встречаются практически в каждой вакансии, а где не встречаются — там подразумеваются.

По факту тесты пишутся не всегда и не везде, но проект без тестов — это мина замедленного действия: сложно предугадать, когда она «рванёт» и какой будет от этого ущерб. У любого опытного разработчика всегда припасены страшные истории о том, как на прод просочился непротестированный код — и какой катастрофой всё это кончилось.

Зачастую начинающие программисты не хотят писать тесты, не любят и не понимают их. Но с течением времени такие разработчики проходят классические «пять стадий принятия неизбежного»:

1. **Отрицание.** Пускай тесты пишут другие, мне жаль тратить время на ненужную работу! Мой код работает, в нём нет ошибок. Тесты мне не нужны!
2. **Гнев.** Да, мой код не безупречен, в нём бывают ошибки. Но почему именно мне нужно писать эти дурацкие тесты?! Пускай их пишет тимлид, тестировщик… да кто угодно! Не отвлекайте меня от любимого дела — я хочу программировать, творить, а не заниматься унылой рутиной!
3. **Торг.** Пожалуй, я буду писать тесты самостоятельно — ведь я лучше всех понимаю, как работает функция, и быстрее других её исправлю в случае чего. Со следующего проекта начну писать тесты! Нет? Тогда… буду писать тесты только по пятницам! Опять «нет»? Тогда… не буду тестировать всё подряд; пару тестов на приложение — и достаточно. Проверю, что приложение запускается — и хорошо! Никто даже и не заметит.
4. **Депрессия.** Ну вот, опять писать огромное количество тестов; как же они меня угнетают, кто бы знал. На функцию ушёл целый день — а теперь я потрачу вечность на тесты к ней. Когда же всё это закончится?!
5. **Принятие.** Хо-хо, тесты проходят без сучка и задоринки! Хорошо, когда код протестирован. Теперь не страшно показать работу кому угодно: любой может проверить, что мой код — рабочий. Писать тесты — отличная идея, мне это было понятно с самого начала!

![](https://pictures.s3.yandex.net/resources/27_1687357012.png)

## Такие разные тесты

Тесты можно классифицировать в зависимости от того, что именно тестируется:

1. **Unit-тестирование** (иначе — «модульное тестирование» или «тестирование компонентов»): проверяется работа отдельных функций или модулей.
2. **Интеграционное тестирование** проверяет, как разные компоненты программы взаимодействуют между собой и как они работают совместно; например, в Django при интеграционном тестировании проверяется, как приложения взаимодействуют между собой
3. **Системное тестирование**. Полная проверка системы на соответствие исходным требованиям.

Эти тесты логично объединяются в общую цепочку: сначала проверяются отдельные компоненты системы, потом взаимодействие компонентов между собой, а потом — поведение системы в целом.

Как правило, unit-тесты пишут сами разработчики; интеграционные тесты могут писать как программисты, так и тестировщики; системным тестированием обычно занимаются исключительно тестировщики.

![](https://pictures.s3.yandex.net/resources/_picture42x_1683749073.png)

## Тесты — не панацея

Тесты — не «серебряная пуля», они не решают всех проблем с ошибками в программировании. Баги возникают там, где программист не ждёт подвоха; даже если тесты проходят успешно — это не гарантирует, что проект в порядке. В тестах бывают ошибки и недочёты, предусмотреть все возможные варианты использования кода заранее невозможно, а баг может быть в коде, который не покрыт тестами. Будьте бдительны, оставайтесь начеку: «На тесты надейся, но сам не плошай!»

> Тестирование не повышает качества ПО — оно указывает на качество программы, но не влияет на него. Стремление повысить качество ПО за счёт увеличения объёма тестирования подобно попытке снижения веса путём более частого взвешивания. […] Если вы хотите снизить вес, нет смысла покупать новые весы — измените вместо этого свой рацион. Если вы хотите улучшить ПО, вы должны не тестировать больше, а программировать лучше.
> 
> Стив Макконнелл, «Совершенный код»

## Тесты — это серьёзно

Кто знает, какие программы вы будете писать в будущем и где они будут применяться. Возможно, ваш код будет использоваться в очень крупных проектах; привыкайте тестировать его!

От разработчика может зависеть очень многое — судьбы проектов, большие деньги и даже человеческие жизни. Прочитайте статью [«Катастрофические последствия программных ошибок»](https://habr.com/ru/company/vk/blog/370153/) на Хабре, она как раз об этом. А ведь некоторые из описанных в статье ошибок могли быть предотвращены усилиями лишь одного человека.

## На заметку

Почитать про **T**est **D**riven **D**evelopment можно в книге Г. Персиваля «Python. Разработка на основе тестирования». Обычному джуну книга может показаться сложноватой, но:

- наши джуны — не какие-нибудь там «обычные»;
- книга очень полезная!

